/**
 * @license
 * Copyright 2020 Xingwang Liao <kuoruan@gmail.com>
 *
 * Licensed to the public under the MIT License.
 */
"use strict";"require form";"require uci";"require v2ray";return L.view.extend({load:function(){return Promise.all([v2ray.getSections("routing_rule"),v2ray.getSections("routing_balancer","tag"),v2ray.getSections("outbound","tag")])},render:function(o){var t,a=void 0===o?[]:o,e=a[0],n=void 0===e?[]:e,r=a[1],i=void 0===r?[]:r,l=a[2],u=void 0===l?[]:l,m=new form.Map("v2ray","%s - %s".format(_("V2Ray"),_("Routing")),_("Details: %s").format('<a href="https://www.v2ray.com/en/configuration/routing.html#routingobject" target="_blank">RoutingObject</a>')),s=m.section(form.NamedSection,"main_routing","routing");s.anonymous=!0,s.addremove=!1,t=s.option(form.Flag,"enabled",_("Enabled")),(t=s.option(form.ListValue,"domain_strategy",_("Domain resolution strategy"))).value(""),t.value("AsIs"),t.value("IPIfNonMatch"),t.value("IPOnDemand"),(t=s.option(form.ListValue,"domain_matcher",_("Domain name matching algorithm"))).value("linear"),t.value("mph"),t=s.option(form.MultiValue,"rules",_("Rules"),_("Select routing rules to use"));for(var c=0,d=n;c<d.length;c++){var p=d[c];t.value(p.value,p.caption)}t=s.option(form.MultiValue,"balancers",_("Balancers"),_("Select routing balancers to use"));for(var g=0,v=i;g<v.length;g++){p=v[g];t.value(p.value,p.caption)}var f=m.section(form.GridSection,"routing_rule",_("Routing Rule"),_("Add routing rules here"));f.anonymous=!0,f.addremove=!0,f.sortable=!0,f.nodescription=!0,(t=f.option(form.Value,"alias",_("Alias"))).rmempty=!1,(t=f.option(form.ListValue,"type",_("Type"))).value("field"),(t=f.option(form.DynamicList,"domain",_("Domain"))).modalonly=!0,(t=f.option(form.DynamicList,"ip",_("IP"))).modalonly=!0,(t=f.option(form.DynamicList,"port",_("Port"))).modalonly=!0,t.datatype="or(port, portrange)",(t=f.option(form.MultiValue,"network",_("Network"))).value("tcp"),t.value("udp"),(t=f.option(form.DynamicList,"source",_("Source"))).modalonly=!0,(t=f.option(form.DynamicList,"user",_("User"))).modalonly=!0,t=f.option(form.DynamicList,"inbound_tag",_("Inbound tag")),(t=f.option(form.MultiValue,"protocol",_("Protocol"))).modalonly=!0,t.value("http"),t.value("tls"),t.value("bittorrent"),(t=f.option(form.Value,"attrs",_("Attrs"))).modalonly=!0,t=f.option(form.ListValue,"outbound_tag",_("Outbound tag"));for(var y=0,b=u;y<b.length;y++){p=b[y];t.value(p.caption,p.caption)}(t=f.option(form.ListValue,"balancer_tag",_("Balancer tag"))).modalonly=!0,t.depends("outbound_tag","");for(var h=0,L=i;h<L.length;h++){p=L[h];t.value(p.value,p.caption)}var V=m.section(form.TypedSection,"routing_balancer",_("Routing Balancer",_("Add routing balancers here")));return V.anonymous=!0,V.addremove=!0,(t=V.option(form.Value,"tag",_("Tag"))).rmempty=!1,(t=V.option(form.ListValue,"strategy_type",_("Balancer strategy"))).value("random"),t.value("leastPing"),t.modalonly=!0,t=V.option(form.DynamicList,"selector",_("Selector")),m.render()}});